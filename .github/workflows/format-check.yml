name: ğŸ“„ Check formatting

on:
  push:
  pull_request:
  workflow_dispatch:
    
permissions: {}

jobs:
  format-check:
    name: ğŸ“„ Check code formatting
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ§° Checkout code
        uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
        with:
          persist-credentials: false
      - name: âš™ï¸ Install Nix
        uses: cachix/install-nix-action@2126ae7fc54c9df00dd18f7f18754393182c73cd # v31.9.1
        with:
          nix_path: nixpkgs=channel:nixos-unstable
      - name: ğŸ”’ Cache dependencies
        uses: cachix/cachix-action@3ba601ff5bbb07c7220846facfa2cd81eeee15a1 # v16
        with:
          name: devenv
      - name: ğŸ”§ Install devenv.sh
        run: nix profile install nixpkgs#devenv
      - name: âœ… Do checks
        run: devenv test
